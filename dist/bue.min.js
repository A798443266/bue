/*!
* buejs v0.2.2
* Copyright (c) 2019 bowencool
* Released under the MIT License.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Bue=e()}(this,function(){"use strict";function s(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function u(t){"production"!==process.env.NODE_ENV&&console.warn("[Bue Warn]: "+t)}function f(t,e,n){Object.defineProperty(t,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}var o=function(t,e){if(e in t)return t[e];var n=t;return e.split(".").forEach(function(t){n=n[t]}),n},e=0,r=function(){function t(){this.id=++e,this.watchers=[]}return t.prototype.addWatcher=function(t){this.watchers.push(t)},t.prototype.removeWatcher=function(t){var e=this.watchers.indexOf(t);-1<e&&this.watchers.splice(e,1)},t.prototype.notify=function(){this.watchers.forEach(function(t){t.update()})},t.prototype.depend=function(){t.target&&t.target.addDep(this)},t.target=null,t}(),n=[];var i=function(){function t(t){this.walk(t)}return t.prototype.walk=function(t){for(var e in t){var n=t[e],i=a(t,e,n),o=p(n);Array.isArray(n)&&(o.dep=i)}},t}();function a(t,e,n){var i=new r;return Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get:function(){return i.depend(),n},set:function(t){t!==n&&(p(n=t),i.notify())}}),i}var c=Object.create(Array.prototype);function p(t){if(t&&"object"==typeof t){if(t.__ob__)return t.__ob__;Array.isArray(t)&&(t.__proto__=c,t.forEach(function(t){p(t)}));var e=new i(t);return Object.defineProperty(t,"__ob__",{configurable:!1,writable:!1,enumerable:!1,value:e}),e}}function d(t){t.$options.data?function(t){var e=t.$options,n=e.data,i=e.methods;if("object"===s(n=t._data="function"==typeof n?n.call(t):n))for(var o in n)i&&(a=i,c=o,Object.prototype.hasOwnProperty.call(a,c))&&u('The method "'+o+'" has already been declared as a data property.'),void 0,36===(r=(o+"").charCodeAt(0))||95===r?u('The data property "'+o+'" is a reserved key.'):f(t,"_data",o);var r;var a,c;p(n)}(t):p(t._data={})}["pop","push","unshift","shift","splice","sort","reverse"].forEach(function(t){var e=Array.prototype[t];Object.defineProperty(c,t,{value:function(){var t=e.apply(this,arguments);return this.__ob__.dep.notify(),t}})});var h=0,l=function(){function t(t,e,n){this.depIds={},this.id=h++,this.bm=t,this.expOrFn=e,this.cb=n,this.getter="function"==typeof e?e:function(e){if(!/[^\w.$]/.test(e))return function(t){return o(t,e)}}(e),this.value=this.get()}return t.prototype.update=function(){var t=this.get(),e=this.value;this.value=t,this.cb.call(this.bm,t,e)},t.prototype.addDep=function(t){this.depIds.hasOwnProperty(t.id)||(t.addWatcher(this),this.depIds[t.id]=t)},t.prototype.get=function(){var t;t=this,r.target&&n.push(r.target),r.target=t;var e=this.getter.call(this.bm,this.bm);return r.target=n.pop(),e},t}(),v=function(t,e){void 0===e&&(e=""),t.textContent=e},y=function(t,e){void 0===e&&(e=""),t.value=e},m={text:function(t,e,n){this.bind(t,e,n,v)},model:function(t,n,i){this.bind(t,n,i,y);var e=function(t){var e=t.target.value;!function(t,e,i){var o;if(!(e in t))return e.split(".").forEach(function(t,e,n){e<n.length-1?o=o[t]:o[t]=i});t[e]=i}(n,i,e)};t.addEventListener("input",e),t.addEventListener("change",e)},bind:function(n,t,e,i){i&&i(n,o(t,e)),new l(t,e,function(t,e){i&&i(n,t,e)})},eventHandler:function(t,e,n,i){var o=e.$options.methods&&e.$options.methods[i];n&&o&&t.addEventListener(n,o.bind(e),!1)}},b=function(t){return 1==t.nodeType},g=function(){function t(t,e){this.$el=e.$el=b(t)?t:document.querySelector(t),this.$bm=e,this.$el&&(this.$fragment=function(t){for(var e=document.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);return e}(this.$el),this.compileElement(this.$fragment),this.$el.appendChild(this.$fragment))}return t.prototype.compileElement=function(t){var e=this;t.childNodes.forEach(function(t){b(t)?e.compileNode(t):3==t.nodeType&&/{{\s*(.*?)\s*}}/.test(t.textContent)&&e.compileText(t,RegExp.$1),t.childNodes&&t.childNodes.length&&e.compileElement(t)})},t.prototype.compileNode=function(e){var n=this;Array.from(e.attributes).forEach(function(t){/^b-(\w+)/.test(t.name)?(m[RegExp.$1](e,n.$bm,t.value),e.removeAttribute(t.name)):/^@(\w+)/.test(t.name)&&(m.eventHandler(e,n.$bm,RegExp.$1,t.value),e.removeAttribute(t.name))})},t.prototype.compileText=function(t,e){m.text(t,this.$bm,e)},t}(),_=0;return function(t){var i,o;this._uid=++_,this._isBue=!0,this.$options=t,d(this),"object"===s(o=(i=this).$options.computed)&&Object.keys(o).forEach(function(t){var e=o[t],n="function"===s(e);Object.defineProperty(i,t,{get:n?e:e.get.call(i),set:n?function(){u('Avoiding modify the computed property "'+t+'" unless you provide an setter.')}:function(){e.set.apply(i,arguments)}})}),this.$compiler=new g(t.el,this)}});
